<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>주문 안 하신 쓰레기 나왔습니다</title>

  <style>
@font-face {
  font-family: 'HSBombaram';
  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_one@1.0/HSBombaram.woff') format('woff');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'MaruBuri';
  src: url('https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.woff2');
}
#loadingOverlay {
  position: fixed;
  inset: 0;  
  background: black;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  transition: opacity 0.6s ease;
}

#loadingIcon {
  width: 150px;
  animation: spin 1s linear infinite;
}

.loadingText {
  margin-top: 150px;
  font-size: 20px;
  color: yellow;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

body {
  text-align: center;
  font-family: MaruBuri;
  margin: 0;
  overflow: hidden;
  cursor: url('cursor.png') 40 40, auto;
  background: moccasin;
  background-size: cover;
}

div { position: relative; margin: 0; }

img { position: absolute; }

h1 {
  font-family: "HsBombaram";
  font-weight: normal;
  font-size: 170px;
  padding: 10px;
  margin: 0;
  transition: opacity 0.6s ease;
}

p {
  font-family: 'MaruBuri';
  font-weight: 400;
  font-size: 15px;
  line-height: 1.7;
}

.wrap {
  opacity: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 800px;
  background: white;
  transition: opacity 0.6s ease;
  z-index: 2500;
  padding: 50px 30px;
  pointer-events: auto;
}

.wrap.show {
  display: block;
  opacity: 1;
  pointer-events: auto;
}

.hint { margin: auto;
    width: 100px;
    height: 40px;
    font-size: 12px;
    font-weight: 700;
    color: deeppink;
    padding-top: 10px;
    }

.hint:hover{
  color: moccasin;
}

.fade-out {
  opacity: 0 !important;
}

#mainscreen {
  opacity: 0;
  transition: opacity 0.8s ease;
  position: absolute;
  inset: 0;
}

.fade-in {
  opacity: 1 !important;
}

.trash:hover{
  filter: drop-shadow(0px 0px 10px white)}

button{cursor: url('cursor.png') 40 40, auto;}

.next {
  position: absolute;
  top: 85%;
  left: 87%;
  transform: translate(-50%, -50%);
  font-family: MaruBuri;
    margin-top: 30px;
    padding: 12px 30px;
    font-size: 18px;
    font-weight: 700;
    border: none;
    background-color: moccasin;
    color: sienna;
    pointer-events: auto;
    transition: background-color 0.3s, color 0.3s;
    z-index: 10000;
}

  .next:hover {
    background-color: deeppink;
    color: moccasin;
}

@keyframes jellyBounce {
  0%   { transform: translateX(-50%) scale(1) }
  30%  { transform: translateX(-50%) scale(0.88, 1.12) }
  60%  { transform: translateX(-50%) scale(1.12, 0.88) }
  100% { transform: translateX(-50%) scale(1) }
}

/* 설탕 파우더 */
.sugar {
  position: fixed;
  top: -20px;
  width: 6px;
  height: 6px;
  background: white;
  border-radius: 50%;
  opacity: 0.9;
  pointer-events: none;
  z-index: 5000;
  animation: sugarFall var(--duration) linear forwards;
}

@keyframes sugarFall {
  0% {
    transform: translate(var(--startX), 0);
    opacity: 1;
  }
  100% {
    transform: translate(var(--endX), 800px);
    opacity: 0;
  }
}

#icecreamCanvas {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 500; /* table:600, dish:900보다 뒤 */
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.6s ease;
}

</style>

</head>
<body>
<div id="loadingOverlay">
  <img src="bgtrash.png" id="loadingIcon">
  <div class="loadingText">Loading...</div>
</div>
<div>
  <img src="table.png" style="width: 100vw; z-index: 600; top: 630px; left: 0px;">     
<img src="dish.png" style="width: 800px; z-index: 900; top: 480px; left: 50%; transform: translateX(-50%);">
</div>
  <div id="wrapBox" class="wrap">
    <p style="font-weight: 600; padding-bottom: 10px;">Dessert</p>
    <p>
수정에 수정, 피드백에 피드백을 거쳐<br>마침내 가장 최선의 결과물이 탄생했습니다!<br>여러 아이디어와 시도들 중 가장 달달한 것만을 모아 빚어낸 결과물,<br>맛없을 수가 없습니다.<br>고생한 여러분은 이 단맛을 즐길 자격이 있습니다.
    </p>
    <div id="hint" class="hint">계속 ▸</div>
  </div>
  <div id="mainscreen" style="z-index: 2000;">
     <img src="des.png" style="width: 380px; position: absolute; transform: translateX(-50%); top: 39%; z-index: 2000;" class="trash" id="dessertImg">
  <button id="next" class="next">Done!</button>
  </div>
<script>
  const hint = document.getElementById('hint');
const wrapBox = document.getElementById('wrapBox');
const mainScreen = document.getElementById('mainscreen');
const overlay = document.getElementById('loadingOverlay');
const dessertImg = document.querySelector('#mainscreen img');
const toppings = ["cherry.png", "choco.png", "cream.png", "smile.png", "des2.png", "des3.png", "des4.png", "des5.png", "des6.png" ];
let mouse = {x: 0, y: 0};



window.addEventListener("load", () => {
  const MIN = 1000; // 최소 1.5초
  setTimeout(() => {
    overlay.style.opacity = "0";
    wrapBox.classList.add('fade-in');

    setTimeout(() => {
      overlay.style.display = "none";
    }, 650); 
  }, MIN);
});

/* hint 클릭 → wrap 사라지고 mainscreen 나타남 */
hint.addEventListener("click", () => {
  wrapBox.classList.remove("fade-in");
  wrapBox.classList.add("fade-out");
  
  setTimeout(() => {
    wrapBox.style.display = "none";
    mainScreen.classList.add("fade-in");
  }, 650);
});



dessertImg.addEventListener("click", () => {
  // 젤리 바운스 효과
  dessertImg.style.animation = "jellyBounce 0.5s ease-out";
  setTimeout(() => {
    dessertImg.style.animation = "";
  }, 500);

  // 설탕 파우더 생성
const sugarCount = 100; // 한 번에 60개
for(let i = 0; i < sugarCount; i++){
  const sugar = document.createElement("div");
  sugar.classList.add("sugar");

  const colors = ["salmon","sienna","hotpink","lightsalmon","sandybrown"];
  sugar.style.background = colors[Math.floor(Math.random()*colors.length)];

  const size = 3 + Math.random() * 10;
  sugar.style.width = `${size}px`;
  sugar.style.height = `${size}px`;

  const startX = Math.random() * window.innerWidth;
  const wind = (Math.random() - 0.5) * 300;

  sugar.style.setProperty("--startX", `${startX}px`);
  sugar.style.setProperty("--endX", `${startX + wind}px`);

  sugar.style.setProperty("--duration", `${3 + Math.random()*4}s`); // 3~5초

  document.body.appendChild(sugar);

  setTimeout(() => sugar.remove(), 5000); // 알갱이가 완전히 떨어질 때까지 유지
}


window.addEventListener("mousemove", e=>{
        const mouseX = e.clientX;
        const mouseY = e.clientY;

        // 10% 확률로 토핑 생성
        if(Math.random()<0.1){
            const topImg = document.createElement("img");
            topImg.src = toppings[Math.floor(Math.random()*toppings.length)];
            topImg.style.position="fixed";
            topImg.style.left = `${mouseX-15+(Math.random()-0.5)*30}px`;
            topImg.style.top = `${mouseY-15+(Math.random()-0.5)*30}px`;
            topImg.style.width="150px";
            topImg.style.pointerEvents="none";
            topImg.style.zIndex="1500";
            topImg.style.opacity="1";
            topImg.style.transition="transform 0.8s ease-out, opacity 0.8s ease-out";
            document.body.appendChild(topImg);

            setTimeout(()=>{
    // opacity는 바로 1로 유지
    topImg.style.opacity="1";
},50);

// 1.8초 후 제거 (기존 0.9초 → 1.8초)
setTimeout(()=>topImg.remove(),1800);
        }
    });

  },650);

                next.addEventListener("click", () => {
                window.location.href = "index6.html";
            });


</script>
</body>
</html>