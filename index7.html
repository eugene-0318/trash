<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>주문 안 하신 쓰레기 나왔습니다</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/sunghyunzz/eulyoo1945/eulyoo1945.css"/>
  <style>
@font-face {
  font-family: 'HSBombaram';
  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_one@1.0/HSBombaram.woff') format('woff');
  font-weight: normal;
  font-style: normal;
}

#loadingOverlay {
  position: fixed;
  inset: 0;  
  background: black;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  transition: opacity 0.6s ease;
}

#loadingIcon {
  width: 150px;
  animation: spin 1s linear infinite;
}

.loadingText {
  margin-top: 150px;
  font-size: 20px;
  color: yellow;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

body {
  text-align: center;
  font-family: eulyoo1945;
  margin: 0;
  overflow: hidden;
  cursor: url('cursor.png') 40 40, auto;
  background: black;
  background-size: cover;
}

div { position: relative; margin: 0; }

img { position: absolute; }

h1 {
  font-family: "HsBombaram";
  font-weight: normal;
  font-size: 170px;
  padding: 10px;
  margin: 0;
  transition: opacity 0.6s ease;
}

p {
  font-family: 'eulyoo1945';
  font-weight: 400;
  font-size: 17px;
  line-height: 1.7;
  padding-top: 10px;
}

.wrap {
  opacity: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 800px;
  background: white;
  transition: opacity 0.6s ease;
  z-index: 2500;
  padding: 50px 30px;
  pointer-events: auto;
  display: flex;
  flex-direction: column; /* 세로 방향 배치 */
  justify-content: center; /* 세로 중앙 */
  align-items: center;
}

.wrap p {
  margin: 0;
  text-align: center;
  transition: opacity 0.6s ease; /* 페이드 효과 */
  flex-grow: 1;
}

.wrap.show {
  display: block;
  opacity: 1;
  pointer-events: auto;
}

.hint { margin: auto;
    width: 100px;
    height: 40px;
    font-size: 12px;
    font-weight: 700;
    color: dimgray;
    padding-top: 30px;
     flex-shrink: 0;
    }

.hint:hover{
  color: gainsboro;
}

.fade-out {
  opacity: 0 !important;
}

/* 웹캠 화면 스타일 */
#webcam {
  width: 500px;
  height: 300px;
  margin: 20px 0; /* 텍스트와 버튼 사이 간격 */
  background: black;
  filter: grayscale(100%); /* 흑백 효과 */
  display: none; /* 처음에는 숨김 */
}

#mainscreen {
  opacity: 0;
  transition: opacity 0.8s ease;
  position: absolute;
  inset: 0;
}

.fade-in {
  opacity: 1 !important;
}
button{cursor: url('cursor.png') 40 40, auto;}

.next {
  position: absolute;
  top: 85%;
  left: 87%;
  transform: translate(-50%, -50%);
  font-family: eulyoo1945;
    margin-top: 30px;
    padding: 12px 30px;
    font-size: 18px;
    font-weight: 700;
    border: none;
    background-color: white;
    color: black;
    pointer-events: auto;
    transition: background-color 0.3s, color 0.3s;
    z-index: 10000;
}

  .next:hover {
    background-color: dimgray;
    color: gainsboro;
}

</style>
</head>
<body>
	<div id="loadingOverlay">
  <img src="bgtrash.png" id="loadingIcon">
  <div class="loadingText">Loading...</div>
</div>
<div>
  <img src="table.png" style="width: 100vw; z-index: 600; top: 40vw; left: 0px;">     
<img src="dish.png" style="width: 800px; z-index: 900; top: 31vw; left: 50%; transform: translateX(-50%);">
</div>
  <div id="wrapBox" class="wrap">
  <video id="webcam" autoplay muted playsinline></video>
    <div id="hint" class="hint">계속 ▸</div>
  </div>
  <div id="mainscreen" style="z-index: 2000;">
<img id="coff" src="coff.png" style="transform: translateX(-50%); top: 59vh; left: 50%;width:330px;">

<div id="circle-wrap"></div>
  <button id="next" class="next">처음으로</button>
  </div>
<script>
const hint = document.getElementById('hint');
const wrapBox = document.getElementById('wrapBox');
const mainScreen = document.getElementById('mainscreen');
const overlay = document.getElementById('loadingOverlay');
const webcam = document.getElementById('webcam');

// 로딩 fade 처리
window.addEventListener("load", () => {
  const MIN = 1000;
  setTimeout(() => {
    overlay.style.opacity = "0";
    wrapBox.classList.add('fade-in');
    setTimeout(() => {
      overlay.style.display = "none";
    }, 650);
  }, MIN);
});

// 텍스트 데이터
let data = "시그니처 코스가 모두 제공되었습니다.<br> 어떠셨나요? 입맛에 맞으셨나요?<br><br>여기서 제공되는 것들은 애초에 누구를 위해 만들어진 걸까요?<br>대체 왜 이런 걸 만드는지, 이것들에게 그만한 가치가 있는지<br>궁금해하실지도 모르겠습니다.ㅇ하지만, 지금 이 자리에서 이 모든 코스를 한 접시도 남김없이 맛본<br>여러분이 있습니다.<br>스스로 이 레스토랑 안으로 들어와,<br>무언가를 만들어내는 과정 속 쓴맛과 단맛을 끝까지 함께 음미해 주신 바로 여러분.ㅇ저희의 ‘쓰레기’들은 이렇게 누군가의 시간을 사로잡는 데 성공했습니다.<br>가던 길을 멈추고, 시선을 두고, 어떤 식으로든 여러분만의 감상을 떠올렸다면, <br>그것만으로도 그들은 존재의 의의를 갖는 것입니다.<br>혹시 아나요? 이것들이 누구에게 어떤 인상을 남길지.<br>그리고 또다시 이곳을 찾고 싶게 만들지.ㅇ이용에 감사드리며, 언제든 다시 방문해주시길 기대하겠습니다.<br>저희는 여전히, 그리고 계속해서, 아무도 주문하지 않은 무언가를 만들고 있을 테니까요.";

// 'ㅇ' 기준으로 나누고 공백 제거
let lyrics = data.split("ㅇ").filter(ch => ch.trim() !== "");

// 현재 보여줄 인덱스
let i = 0;

// wrapBox 안에 텍스트 표시할 엘리먼트 생성
let textEl = document.createElement('p');
textEl.innerHTML = lyrics[i];
wrapBox.insertBefore(textEl, hint);

// 웹캠 스트림 상태
let webcamStarted = false;

// 다음 텍스트 보여주는 함수
function showNext() {
  i++;

  if (i < lyrics.length) {
    // 이전 텍스트 fade out
    textEl.classList.remove("fade-in");
    textEl.classList.add("fade-out");

    setTimeout(() => {
      // 다음 텍스트로 교체 후 fade in
      textEl.innerHTML = lyrics[i];
      textEl.classList.remove("fade-out");
      textEl.classList.add("fade-in");

      // 첫 텍스트 이후부터 웹캠 표시
      if (i > 0 && !webcamStarted) {
        webcamStarted = true;
        webcam.style.display = "block";

        // 스트림 연결
        (async () => {
          try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
            webcam.srcObject = stream;
          } catch (err) {
            console.error("웹캠 접근 실패:", err);
          }
        })();
      }
    }, 600);

  } else {
    // 마지막 텍스트 이후 wrapBox 숨기고 mainscreen 등장
    wrapBox.classList.add("fade-out");
    setTimeout(() => {
      wrapBox.style.display = "none";
      mainScreen.classList.add("fade-in");
    }, 800);
  }
}

// hint 클릭 시 showNext 실행
hint.addEventListener("click", showNext);

// 다음 페이지 버튼
document.getElementById('next').addEventListener("click", () => {
  window.location.href = "index7.html";
});
</script>


</body>
</html>